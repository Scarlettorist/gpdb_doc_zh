---
title: 为PXF安装JAVA环境
---

PXF是Java服务 它要求在每个Greenplum数据库主机上安装Java 8或Java 11。

*如果已在每个Greenplum数据库主机上安装了适当版本的Java，则无需执行本主题中的过程。*


## <a id="prereq"></a>准备

确保在每个Greenplum数据库主机上具有访问Java 8或Java 11的权限，或具有超级用户权限来安装Java 8或Java 11。

## <a id="proc"></a>过程

执行以下过程，在master,standby和各个segment上安装Java，可以使用`gpssh`命令在多个主机上执行。

1. 登录greenplum的master节点

    ``` shell
    $ ssh gpadmin@<gpmaster>
    ```

2. 创建一个text文件列出你的gp集群的standby节点和segment节点，每行一个主机名。例如，一个叫做`seghostfile`的文件

    ``` pre
    mstandby
    seghost1
    seghost2
    seghost3
    ```

3. 在master,standby节点和各个segment节点上安装Java，然后在每个主机上配置环境变量

    1. 安装java包。比如安装java 8:

        ``` shell
        gpadmin@gpmaster$ sudo yum -y install java-1.8.0-openjdk-1.8.0*
        gpadmin@gpmaster$ gpssh -e -v -f gphostfile sudo yum -y install java-1.8.0-openjdk-1.8.0*
        ```

    2. 标识Java基本安装目录。如果每台主机上的`gpadmin`用户的`.bashrc`文件不存在，请更新它以包含`$JAVA_HOME`设置。例如，如果您安装了Java 8：

        ``` shell
        gpadmin@gpmaster$ echo 'export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.x86_64/jre' >> /home/gpadmin/.bashrc
        gpadmin@gpmaster$ gpssh -e -v -f gphostfile "echo 'export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.x86_64/jre' >> /home/gpadmin/.bashrc"
        ```

        如果安装了Java 11, `JAVA_HOME`可能是`/usr/lib/jvm/java-11-openjdk-11.0.4.11-0.el7_6.x86_64`。

**注意**: 如果超级用户选择了新安装的Java替代品作为系统缺省值，则为`JAVA_HOME=/usr/lib/jvm/jre`。